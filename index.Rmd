---
title: "Gov 50 Final Project"
author: "Courtney Taylor"
description: "My final project"
output:
  distill::distill_article:
    self_contained: false
---



## Project thoughts

Milestone 1: Create public GitHub repository: I am interested in exploring data related to socioeconomic levels within the United States. I am wondering how children or family sizes could affect someones socioeconomic level or their income. This is interesting as our country was known for having a large middle class, but this has slowly deteriorated over time. Now, America is struggling to keep the middle class alive. I would like to analyze if family size plays a role in this by decreasing incomes of a single person within the particular family. 



Milestone 3:

```{r}
library(readr)
library(tidyverse)
library(dplyr)
library(infer)
youth_dataset_long_form <- read_csv("~/Desktop/Final Project/youth-dataset-long-form.csv")
```



Data Section:

Description of Dataset: National Longitudinal Survey of Youth (1979 -- 2012) is a longitudinal project that follows a sample of American youth born between 1957-64 on various life aspects from 1979 to 2012. The data set provided below is a subset of this database, focusing on variables of 4 main topics: socioeconomic status, employment, education, and marriage. 

How does the variable family size affect income for a singular person? Does the number of people in a family affect income, or is there an average difference in income with any family size versus those who do not have family members? I plan to examine these questions and variables to find if there are any correlations or relationships to be understood. I am interested in exploring this data related to socioeconomic levels within the United States as I am wondering how children or family sizes could affect someones socioeconomic level or their income. This is interesting as our country was known for having a large middle class, but this has slowly deteriorated over time. Now, America is struggling to keep the middle class alive. I would like to analyze if family size plays a role in this by decreasing incomes of a single person within the particular family. While the description of dataset above says how the data comes from a longitudinal survey of youth as it follows the youth from 1979 to 2012, for my data, I am solely using the survey conducted in 2012 as the final survey. I am not analyzing how the participants changed over time in a before and after, rather I am conducting a cross-sectional study to see how in this one survey, in this one point in time, did the participants family size affect their income. To clarify, this study is taking data that has been measured through a survey of over 240,000 people, all within different socioeconomic groups, race, and gender. 

I hypothesize that when it comes to family size, the more family members or the greater the family size, the less income an individual person will have. I will have three groups of family sizes: between 1 and 4, between 5 and 10, and between 11 and 15. I hypothesize that in family sizes between 1 and 4, there will be a higher average income than the other two groups. I also hypothesize that the family size group between 5 and 10 will have a slightly smaller average income than the family sizes between 1 and 4, but will still be larger than the family sizes between 11 and 15. The reason I am hypothesizing this is due to my prior knowledge that children cost money and time. Often, parents who have more children will be required to stay home to care for them or will not have the time to take on larger corporate jobs with higher pays. This means they will likely have a job that is either flexible from home with lower pay, or a entry level job with lower pay. In families, you will either have a single mother or father with children, or you could have parents with children. Either way, the more children you have, I believe the lower income you will be able to get. With families who have less children, I believe you have more time on your hands to get a corporate or higher income job. It is also often seen that those who are close to or below the poverty line in income, will have a larger to medium size family. The null hypothesis in this case would be that family size has no effect on income levels. 

The explanatory variable is the amount of people within a family or family size. Family size will be measured through three categories: between 1 and 4, between 5 and 10, and between 11 and 15. The outcome variable being measured and assessed is income. Income amounts are being taken from the dataset I acquired which is a survey sent to individuals asking them the specific income amount they are making. I have not split income up into different categories, but I am rather seeing it as it is spread through family sizes. My hypothesis states that this income (outcome variable), will be affected by family size (explanatory variable).

The observed pattern in the data that would support my hypothesis is if there is a consistent trend of results that show the more people within a family or the larger the family size, the less income an individual will be making. 	The observed pattern that would disprove my hypothesis is if there is no consistent trend showing that income lowers as family size grows. It would also be disproven if one of the categories of family size is higher than the category of between 1 and 4. For example, if the category 5-10 is higher in income than the category 1-4, then my hypothesis would be disproven. Generalizing, the main pattern that would disprove my hypothesis is if there is no discernable difference in income between the different family size categories. My hypothesis would also be disproven if my p-value as shown in my regression was above the alpha of 0.05. 



Family Size 1 versus Family Size more than 1, ATE:

```{r}
set.seed(02138)

youth_dataset_long_form <- youth_dataset_long_form |>
  mutate(
    FAMSIZE_group = case_when(
      FAMSIZE_ < 5 ~ "1. 1-4 Family Size",
      FAMSIZE_ >= 5 & FAMSIZE_ <= 10 ~ "2. 5-10 Family Size",
      FAMSIZE_ > 15 ~ "3. 11-15 Family Size"
    ))

youth_dataset_long_form <- youth_dataset_long_form |>
  mutate(treatment = if_else(FAMSIZE_ > 1, "Treated", "Control"))
 
family_ate <- youth_dataset_long_form |>
group_by(treatment) |>
summarize(mean_income = mean(INCOME_)) |>
pivot_wider(names_from = treatment, values_from = mean_income) |>
mutate(ATE = `Treated` - `Control` )
family_ate

family_ate
```

Explanation: 

From the table above, I decided to analyze if those who have at least one family member in their family besides themselves, will have a higher or lower income than someone who is the only person in their family. In terms of the control and the treated, the control is those who are the only member of their family. Treated encompasses those who have more than just themselves in their family, or at least one other family member besides themselves. From the information given above, we can see that those who have an additional family member will have an average income of $15,797.46 while those who are by themselves will have an average income of $16,968.84. This means that those who are by themselves in their family, will have an average increase of $1,171.38 in comparison to those who have at least one other family member. This provides evidence towards rejecting my null hypothesis as I had previously hypothesized that there will be a decrease in income for those who have family members compared to those who do not. 




Family Size Mean Income:

```{r}
set.seed(02138)

youth_dataset_long_form <- youth_dataset_long_form |>
  mutate(
    FAMSIZE_group = case_when(
      FAMSIZE_ < 5 ~ "1. 1-4 Family Size",
      FAMSIZE_ >= 5 & FAMSIZE_ <= 10 ~ "2. 5-10 Family Size",
      FAMSIZE_ > 15 ~ "3. 11-15 Family Size"
    ))

youth_dataset_long_form$FAMSIZE_group <- factor(youth_dataset_long_form$FAMSIZE_group, 
                                                levels = c("1. 1-4 Family Size", "2. 5-10 Family Size", "3. 11-15 Family Size"))

means_by_family_size <- youth_dataset_long_form |>
  group_by(FAMSIZE_group) |>
  summarise(mean_income = mean(INCOME_, na.rm = TRUE))

means_by_family_size
```

Explanation:

In this table, I grouped together family sizes into three categories: 1-4 Family Size, 5-10 Family Size, and 11-15 Family Size. I then calculated the mean income for every level to see an average income for one person in a family between the sizes in each category. As we can see, those in a family size between 1 and 4, will have the most income with it being an average of $17,401.82. Those with the smallest amount of income will be those in the 5-10 family size group which goes against my initial theory of the more people in a family means the less income a person will have. Since the middle group of 5-10 has the lowest income, this provides evidence toward me failing to reject my null hypothesis. 






Histogram Showing Income (Dependent Variable):

```{r}
library(ggplot2)

set.seed(02138)

youth_dataset_long_form <- youth_dataset_long_form |>
  mutate(
    FAMSIZE_group = case_when(
      FAMSIZE_ < 3 ~ "1. 1-2 Family Size",
      FAMSIZE_ >= 3 & FAMSIZE_ <= 5 ~ "2. 3-5 Family Size",
      FAMSIZE_ > 15 ~ "3. 6-15 Family Size"
    )) 

income_hist <- ggplot(youth_dataset_long_form, aes(x = INCOME_, fill = as.factor(FAMSIZE_group))) +
  geom_histogram(alpha = 0.7) +
  labs(title = "Income Distribution by Family Size",
       x = "Income",
       y = "Frequency") +
  scale_x_log10(labels = scales::dollar_format())

income_hist
```
Explanation:

The histogram above works to simplify my data to see how income is spread among three new subcategories (due to the frequency being so low for those in the category of 11 - 15, causing the category not to show up) of family size: 1-2, 3-5, and 6-15. I did this as another way to help prove that I can reject my null hypothesis as I wanted to see if income would decrease as the number of family members increased. As we can see from the histogram, this is not exactly what happened. My histogram shows that while there is a significant difference in the amount of people in each subcategory, that within the first two categories, everyone averaged or peaked in the same location, around $70,000. The larger family size of 6-15 (which is weirdly being represented by the gray NA rather than blue), peaked a little earlier around $50,000 which is a significant drop compared to the other two categories. While this would be a hard visual to use to prove that I can reject my null hypothesis, I believe I would still be able to as although the 1-2 and the 3-5 categories are almost the same in income, the 6-15 group has a significant drop in income meaning that when family sizes become 6 people or more, an individual is likely to drop in income. 





Results Section:


Regression:

```{r}
library(stargazer)

fit_ate <- lm(INCOME_ ~ treatment + COUNTRY_OF_BIRTH + SAMPLE_RACE + SAMPLE_SEX + FAMSIZE_ + POVSTATUS_ + REGION_ + EDU_DEGREE + EMP_STATUS_, data = youth_dataset_long_form)

summary(fit_ate)
```
Explanation: For the results section, you should interpret (in plain English) the main coefficient of interest in your regression. You should also comment on the statistical significance of the estimated coefficient and whether or not you believe the coefficient to represent a causal effect.


Based on the regression analysis above, the main coefficient indicates that for every additional family member, there will be an estimated increase of $1,5522.86 in income. The statistical significance of this coefficient is quite high as indicated by the high t-value of 13.870 being so far from 0, and the very low p-value of 2.2e-16 which is incredibly lower than the alpha of 0.05. This goes to show that the relationship between family size and income is unlikely to be due to random chance. 
However, it is important to note that while the main coefficient appears significant, it does not necessarily imply that there is a casual effect. This is due to other variables or coefficients included in the analysis also show significant impacts on income. This can be seen with the following coefficients also having a p-value of 2.2e-16: SAMPLE_SEXMALE (gender), POVSTATUS_0 (either being in poverty or not), and EDU_DEGREE (the different variations of education from no education to a professional degree). There are multiple other coefficients that are also below the alpha but these were the furthest away along with my main coefficient. These variables all have similar p-values that are significantly far from 0, suggesting that they too affect income along with family size. 

To add, the relatively low standard error of 111.96 adds to the confidence in the estimate given; the smaller a standard error is, the greater certainty we can have in the estimated coefficient. 

In conclusion, this regression shows that the treatment effect does have an impact on my control (family size does effect income), but in this case, while this evidence goes to reject my null hypothesis, it also goes against my own hypothesis that income will decrease as family size increases. While this evidence is clear for this regression, due to my other graphs, charts, tables, and work showing that income decreases and does not in fact increase, I can acknowledge that this regression believes income increases, but can still make the decision that family size does in fact decrease income.







P-Value Distribution To Reject Null Hypothesis:

```{r}
set.seed(02138)

ate <- youth_dataset_long_form |>
  specify(INCOME_ ~ treatment) |>
  calculate(stat = "diff in means", order = c("Treated", "Control"))

ate_null_dist <- youth_dataset_long_form |>
  specify(INCOME_ ~ treatment) |>
  hypothesize(null = "independence") |>
  generate(reps = 1000, type = "permute") |>
  calculate(stat = "diff in means", order = c("Treated", "Control"))

ate_p <- ate_null_dist |>
  get_p_value(obs_stat = ate, direction = "both")

ate_null_dist |>
  visualize() +
  shade_p_value(obs_stat = ate, direction = "both")
```
Explanation:

The graph above represents what income levels would be if my treatment had no effect. The red line shows what the actual treatment effect is, showing that the treatment effect is statistically significant in this case study. This means that when family size increases, it does have an effect on income, and in this case since the red line is in the negatives, we can assume and see that the treatment effect has a negative effect. This shows that with an increase of family size, there will be a negative effect on income, which goes to prove that I can reject my null hypothesis. 




How The Size of a Family Can Affect Income:

```{r}
library(ggplot2)
library(infer)

youth_dataset_long_form |>
  slice_sample(n = 1000)

ggplot(youth_dataset_long_form, aes(x = FAMSIZE_, y = INCOME_, color = SAMPLE_RACE)) +
  geom_jitter(alpha = 0.5) +
  geom_smooth(method = "lm", formula = y ~ x, se = FALSE, color = "black") +
  labs(
    x = "Family Size",
    y = "Income ($)",
    color = "Race"
  ) +
  theme_minimal() +
  scale_y_continuous(labels = scales::comma)

ggplot
```


Explanation for Visual: The visual above represents a scatter plot representing the relationship between income and family size, and the points are color coded to the race that each individual is. The regression line is here to show the relationship between the two variables to further predict the value of the dependent variable for a given value of the independent variable. The results from the scatter plot show that first, most of the individuals within this data set are below the $200,000 income level. It also shows that while every race is spread throughout the amount of children each family has, black people and Hispanic people tend to be the only ones who have more than 11 children within their family. It is also seen that there is a decline in income level in relation to the amount of children a family has. For every child born into a family, the income level will decrease. There are also some points in the higher income level area between $200,000 and $350,000 but even these points tend to stick in the small amount of family members area, mainly staying between 1 and 7 family members. There are 8 outlying points closer to the 10 family member mark, but these can be taken with small value into the graph. From this graph it is clear that when adding family members, a person's income will decrease. This provides evidence for me to reject my null hypothesis. 




A Formatted Table to Represent Above Scatterplot:

```{r}
library(ggplot2)
library(scales)
library(gt)
library(tidyverse)
library(dplyr)

plot_data <- youth_dataset_long_form

table_summary <- plot_data |>
  select(FAMSIZE_, INCOME_, SAMPLE_RACE) |>
  filter(FAMSIZE_ >= 1) |>
  group_by(FAMSIZE_, SAMPLE_RACE) |>
  summarise(avg_income = mean(INCOME_, na.rm = TRUE)) |>
  gt() |>
  tab_header(
    title = "Summary Table",
    subtitle = "Average Income by Family Size and Race"
  ) |>
  fmt_number(
    columns = vars(avg_income),
    suffixing = TRUE,
    decimals = 2
  )

table_summary
```

Above I created a table showing the relationship between family size, race, and average income; this is grouped through family size. This nicely formatted table showing the results of my graph, shows that there is indeed a correlation between average income and family size as income begins to drop quickly once family sizes reach 6 and above. It should be acknowledged though, that there are some outlier's within this summary of results that is not common to the decreasing trend such as a Hispanic family of 16 making 27.00k when with a Hispanic family of 15 was only making 2.55k. 

To compare, a black family of 5 will have a single person with an income of 10.30k while a black family of 18 will have a single person with an income of 0.00k. I also noticed a large difference between Black families, Hispanic families, and non-black, non-Hispanic families. To compare, a black family of 3 will have an average income of 13.73k, while a Hispanic family of 3 will have an average income of 15.82k, and finally a non-black, non-Hispanic family of 3 will have an average income of 16.84k. While race plays no part in my hypothesis, it is an interesting con-founder that could be in play when it comes to family size affecting income. From this nicely formatted table, I can see that while there are some outliers, there is some evidence pointing towards family sie negativley affecting income which goes to rejectmy null hypothesis





Final Report: 






